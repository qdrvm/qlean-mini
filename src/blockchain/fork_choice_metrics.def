/**
 * Copyright Quadrivium LLC
 * All Rights Reserved
 * SPDX-License-Identifier: Apache-2.0
 */

/**
 * @brief ForkChoiceStore metrics definitions
 *
 * Format:
 *   METRIC_GAUGE(field_name,
 *                "prometheus_metric_name",
 *                "help_text")
 *
 *   METRIC_GAUGE_LABELS(field_name,
 *                       "prometheus_metric_name",
 *                       "help_text",
 *                       {"label1", "label2", ...})
 *
 *   METRIC_COUNTER(field_name,
 *                  "prometheus_metric_name",
 *                  "help_text")
 *
 *   METRIC_COUNTER_LABELS(field_name,
 *                         "prometheus_metric_name",
 *                         "help_text",
 *                         {"label1", "label2", ...})
 *
 *   METRIC_HISTOGRAM(field_name,
 *                    "prometheus_metric_name",
 *                    "help_text",
 *                    {bucket1, bucket2, ...})
 *
 *   METRIC_HISTOGRAM_LABELS(field_name,
 *                           "prometheus_metric_name",
 *                           "help_text",
 *                           {bucket1, bucket2, ...},
 *                           {"label1", "label2", ...})
 */

METRIC_GAUGE(fc_head_slot, "lean_head_slot", "Latest slot of the beacon chain")
METRIC_GAUGE(fc_current_slot, "lean_current_slot", "Current slot of the lean chain")
METRIC_GAUGE(fc_safe_target_slot, "lean_safe_target_slot", "Safe target slot")
METRIC_COUNTER(fc_reorgs_total,
               "lean_fork_choice_reorgs_total",
               "Total number of fork choice reorgs")
METRIC_HISTOGRAM(fc_reorg_depth,
                 "lean_fork_choice_reorg_depth",
                 "Depth of fork choice reorgs (in blocks)",
                 (1, 2, 3, 5, 7, 10, 20, 30, 50, 100))

// Attestation validation
METRIC_COUNTER_LABELS(fc_attestations_valid_total,
                      "lean_attestations_valid_total",
                      "Total number of valid attestations",
                      {"source"})
METRIC_COUNTER_LABELS(fc_attestations_invalid_total,
                      "lean_attestations_invalid_total",
                      "Total number of invalid attestations",
                      {"source"})
METRIC_HISTOGRAM(fc_attestation_validation_time_seconds,
                 "lean_attestation_validation_time_seconds",
                 "Time taken to validate attestation",
                 (0.005, 0.01, 0.025, 0.05, 0.1, 1))

// Block processing
METRIC_HISTOGRAM(fc_block_processing_time_seconds,
                 "lean_fork_choice_block_processing_time_seconds",
                 "Time taken to process block in fork choice",
                 (0.005, 0.01, 0.025, 0.05, 0.1, 1))
